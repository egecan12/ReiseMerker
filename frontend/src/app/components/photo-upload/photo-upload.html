<div class="photo-upload">
  <!-- Message area -->
  <div *ngIf="uploadMessage" class="message" [ngClass]="messageType" (click)="clearMessage()">
    {{ uploadMessage }}
    <span class="close-btn">×</span>
  </div>

  <!-- Photo Section Header -->
  <div class="photo-header" (click)="togglePhotoSection()">
    <h4>
      📸 Add Photos
      <span class="photo-count-badge" *ngIf="hasPhotos()">{{ location.photos?.length }}</span>
    </h4>
    <div class="toggle-icon" [class.expanded]="isExpanded">
      <span>{{ isExpanded ? '▲' : '▼' }}</span>
    </div>
  </div>

  <!-- Upload Section (Collapsible) -->
  <div class="upload-section" [class.expanded]="isExpanded" *ngIf="isExpanded">
    
    <!-- Drag & Drop Area -->
    <div 
      class="drop-zone"
      [class.drag-over]="dragOver"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
      (click)="fileInput.click()">
      
      <div class="drop-zone-content">
        <div class="upload-icon">📁</div>
        <p class="drop-text">
          <span *ngIf="!selectedFiles">Drag & drop photos here or click to select</span>
          <span *ngIf="selectedFiles">{{ selectedFiles.length }} photo(s) selected</span>
        </p>
        <small class="upload-hint">Max 5 photos, 5MB each (JPEG, PNG, GIF, WebP)</small>
      </div>
      
      <input 
        #fileInput
        id="photoInput"
        type="file" 
        accept="image/*" 
        multiple 
        (change)="onFileSelect($event)"
        style="display: none;">
    </div>

    <!-- Upload Actions -->
    <div class="upload-actions" *ngIf="selectedFiles && selectedFiles.length > 0">
      <button 
        class="btn btn-success"
        (click)="uploadPhotos()"
        [disabled]="isUploading || !(location.id || location._id)"
        [title]="getUploadButtonTitle()">
        <span *ngIf="isUploading">⏳ Uploading...</span>
        <span *ngIf="!isUploading">📤 Upload Photos</span>
      </button>
      
      <button 
        class="btn btn-outline"
        (click)="clearSelection()"
        [disabled]="isUploading">
        🗑️ Clear
      </button>
    </div>

  </div>

</div>